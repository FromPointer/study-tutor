#VIM Common Command

##1. 多文件编辑之间切换 

###1）同时vi多个文件时，

    CTRL-SHIFT-6 回到上一个文件，在本次vi的文件和上次vi的文件之间切换。

###2）也可以使用:

    :e# 进行切换。



##2. 如何去掉文本中的^M 硬回车？

###用shell或者unix语句实现：

    cat filename |tr -d '/015' >newfile



##3. 打开多个文件(缓冲区)

    vi flname1 flname2 ... flnameN

    将多个文件调入缓冲，是 argument list。



###3.1 进入缓冲区中某个文件

    :e filename
    这是在进入 vim 后，在不离开 vim 的情形下再开其它文件，只要您要编辑的档案是在目前目录，Tab 补全键还是可以使用。是buffer list。
    **注意：:e 或者  :new 或者  :split 后边可以跟目录,这样就可以在目录下慢慢找要打开的文件了



###3.2 缓冲区跳转
    :n   编辑下一个文件。
    
    :2n  编辑下二个文件。

    :N   编辑前一个文件。

    :rew 回到首文件

    :args 查看当前编辑缓冲文件状态

    :e# 或 Ctrl-^   编辑前一个档案，用于两文件互相编辑时相当好用。这种用法不管是 argument list 或 buffer list 档案间皆可使用。 使用Ctrl－^ 命令更便捷。


####ls
    用来显示缓冲区中的文件，编号后边有#的代表是前一个文件，可以通过`:e#`来进入，有 `%a` 的代表是当前文件；    
    什么也没有的可以通过 `:bn` 来进入，这里的 `n` 代表文件编号。
    
    :b 文件名或编号   ：移至该文件。
    :e# 编号 也是可以的，这样的用法则是所有 vi clone 都通用

    在 buffers 中，减号 - 表示这个 buffer 并未载入，不过，不必担心，载入相当快速的。加号 + 表示这个 buffer 已经修改过了。
    :bn    buffer next。这里的n代表字母n；

    :bl     buffer last。


###3.3 移除缓冲区

    :bd(elete)   buffer 在未离开 vim前是不会移除的，可使用这个指令移除。其实移除它干什么呢?       
    
    vim是您在叫用时才会载入的，因此这些 buffers 并不是像 cache 一般要占内存的。


##4. 重新编辑
####放弃一修改过的文件，重新编辑。

    (1)使用命令　:q!强行退出后再vi flname重新进入。

    (2)使用命令　:e!强行重编辑更便捷。这样也是会打开文件，但会放弃目前编辑文件的改变，否则如果文件已有变动，vim 预设是不让您随便离开的。:e! 后不接什么的话，代表舍弃一切修改，重新载入编辑中文件


##5. 修改文字 

    cw:删除一个单词并进入插入模式；

    cc:删除一行并进入插入模式；

    r:  然后输入的字母将替换当前字母并保持命令模式,R则是不停的替换(一个挨着一个)。


##6. Jump in file (文件中跳转)

    0  回到行首

    $  回到行尾

    nG 跳到第 n【行号】 行

    h: 在当前行向左移动一个字符

    j: 移动到下一行

    k: 移动到上一行

    l: 在当前行向右移动一个字符

    Ctrl + f: 向前滚动一页

    Ctrl + b: 向后滚动一页

    Ctrl + d: 下翻半页

    Ctrl + u: 上翻半页

    Ctrl + e: 逐字克隆下一行内容

    Ctrl + y: 逐字克隆上一行内容

    Ctrl + r: 重做

    :n   将光标定位到第n行

    :$   将光标定位到最后一行

    G    将光标定位到本文章的最后一行，与:$功能相同。

    H    将光标定位到屏幕的顶端

    M    将光标定位到屏幕的中间

    L    将光标定位到屏幕的底端

    <1~100>% 按百分比转到相应的行数

    zz 将光标所在行调整至页面中间


##7. 窗口命令

####`<C-W>` = ctrl+w
    :split 文件名 同时在一个页面显示多个文件的内容,类似多窗口
    <C-W><C-W>：  切换当前窗口
    <C-W> f ：    切分显示光标在处的文件名，VIM 会在 path 中搜索该文件名，比如常用它打开 #include 语句中的文件
    <C-W>_ ：     当同时打开几个文件时，按 <C-W>_ 使当前窗口最大化

####在窗格间切换的方法
    <Ctrl-w> + 方向键   ——切换到前／下／上／后一个窗格
    <Ctrl-w> + h/j/k/l  ——同上
    <Ctrl-w> + w        ——依次向后切换到下一个窗格中


####用Ctrl-W命令指定光标移动：

    Ctrl-W +        扩大窗口

    Ctrl-W -        缩小窗口

    Ctrl-W h        移动到窗口左边

    Ctrl-W j        移动到窗口下边

    Ctrl-W k        移动到窗口上边

    Ctrl-W l        移动到窗口右边

######`<C-w> + key` === <C-W>按下后,松开键盘,再按下一个命令就可以了.

    如果要关闭分割窗口可以用:close，剩下只有一个窗口的话就不能关了。

    多窗口是split，像用e打开多个文件是将文件放在缓冲区中。


##8. 自动完成

    i<C-P>   向上搜索，补全一个词

    i<C-N>   向下搜索，补全一个词

    i<C-X><C-L> 补全一行。

######比如你写过一行 `for (int i = 0; i < 100;` i++)，你想再写一模一样的一行，只要输入`for<C-X><C-L>`即可。如果补全出来的不是你想要的那一行，你可以按 `<C-P> 或 <C-N>` 选择上一个或下一个匹配行 `i<C-X><C-F>`   在文件系统中搜索，补全一个文件名如果按 `<C-P> 或 <C-N>`补全一个词，在当前文件中没有找到匹配，VIM 将搜索 `#include` 语句中的文件，而文件的位置将在 path 中搜索。

    i<C-Y>   把上一行对应列的字符抄下来

    i<C-E>   把下一行对应列的字符抄上来,这两个都可以一直按下去,到了行尾自己会停的.


##9. 寄存器操作

####Vim可以将不同字段`剪切`或`复制` 到不同`寄存器`中，您可以从 `不同寄存器` 中取出内容后粘贴

    "<寄存器名称> 按下 “"” 键和另一个字符键，便可以定义一个寄存器。
    例如："a  "1

######定义寄存器后直接进行操作

    "ayy     将当前行复制到寄存器 a 中
    "ap      将寄存器 a 中的内容粘贴到光标之后


######通常情况下，
    寄存器 + ( " + Shift+= )对应X下的 剪贴板。

    您在其它程序中复制的内容，可以使用 "+p 粘贴到Vim中；

    没有指定寄存器时，Vim使用“无名寄存器”存储内容


##10. 正则表达式

#####在搜索和替换时，可以使用正则表达式进行匹配

    ^      行首        
    
    ＄     行尾

    .      匹配除换行符之外的任何一个单字字符，空格也视为字符。

    ^      匹配  以...作为一行的开头

    ＄     匹配以.....作来一行的末尾

    〔 〕  匹配括号内所包含的字符中的任何一个

    /<     在单词的开始

    />     或结尾  匹配字符

    ～     匹配上次搜索中使用的任何正规表达式。


##11. others shorts-key

####插入模式下的快捷键
    <Ctrl+r><寄存器名称>   输入指定寄存器内容

    <Ctrl+k><2个字符>      输入二合字符

    <Ctrl+v><数字>         通过数字编码输入字符 

    <Ctrl+v><键位>         输入键位的名称


####删除命令操作
    d l 删除当前字符（与x命令功能相同）

    d 0 删除到某一行的开始位置

    d ^ 删除到某一行的第一个字符位置（不包括空格或TAB字符）

    d w 删除到某个单词的结尾位置

    d 3 w 删除到第三个单词的结尾位置

    d b 删除到某个单词的开始位置

    d W 删除到某个以空格作为分隔符的单词的结尾位置

    d B 删除到某个以空格作为分隔符的单词的开始位置

    d 7 B 删除到前面7个以空格作为分隔符的单词的开始位置

    d） 删除到某个语句的结尾位置

    d 4） 删除到第四个语句的结尾位置

    d（ 删除到某个语句的开始位置

    d } 删除到某个段落的结尾位置

    d { 删除到某个段落的开始位置

    d 7 { 删除到当前段落起始位置之前的第7个段落位置

    d d 删除当前行

    d /t e x t 删除从文本中出现" t e x t"中所指定字样的位置，一直向前直到下一个该字样所出现的

    位置（但不包括该字样）之间的内容

    d fc 删除从文本中出现字符"c"的位置，一直向前直到下一个该字符所出现的位置（包括

    该字符）之间的内容

    d tc 删除当前行直到下一个字符" c"所出现位置之间的内容

    D 删除到某一行的结尾

    d $ 删除到某一行的结尾

    5 d d 删除从当前行所开始的5行内容

    d L 删除直到屏幕上最后一行的内容

    d H 删除直到屏幕上第一行的内容

    d G 删除直到工作缓存区结尾的内容

    d 1 G 删除直到工作缓存区开始的内容



####修改命令操作
    c l 更改当前字符

    c w 修改到某个单词的结尾位置

    c 3 w 修改到第三个单词的结尾位置

    c b 修改到某个单词的开始位置

    c W 修改到某个以空格作为分隔符的单词的结尾位置

    c B 修改到某个以空格作为分隔符的单词的开始位置

    c 7 B 修改到前面7个以空格作为分隔符的单词的开始位置

    c 0 修改到某行的结尾位置

    c） 修改到某个语句的结尾位置

    c 4） 修改到第四个语句的结尾位置

    c（ 修改到某个语句的开始位置

    c } 修改到某个段落的结尾位置

    c { 修改到某个段落的开始位置

    c 7 { 修改到当前段落起始位置之前的第7个段落位置

    c tc 修改当前行直到下一个字符c所出现位置之间的内容

    C 修改到某一行的结尾

    c c 修改当前行

    5 c c 修改从当前行所开始的5行内容



####替换命令操作
    s 将当前字符替换为一个或多个字符

    S 将当前行替换为一个或多个字符

    5 s 将从当前字符开始的5个字符替换为一个或多个字符

####折叠代码 
    可以zf进行折叠
    zo打开折叠,也可以方向键向右打开折叠
    zc关闭折叠(只要在被折叠的块中的任一个语句就行)
    
####缩进代码
    <是左缩进
    >是右缩进

####Format code
    按v选定后按=就是自动格式化代码,自动缩进,内部的递归的缩进都做到了行左移<<，行右移>>，该命令用于调整源码缩进格式简便快速。

###vim代码块操作
    <C-V>是按列块模式的选定,<shift-V>是行选定,v是普通选定

####注释整块(块注释)内容: 
    <C-V> 选定要注释掉的行, 然后按 I(大写I) 输入//, 接着按 Esc 两次

####取消块注释:
    <C-V>选定要取消注释的块(即带//的多注释行), 然后d 
    
####Column mode(列模式):
######列块选定后:
    I是在前边都插入
    A是在后边都插入


####代码补全 -->Insert模式下
    ctrl+n / ctrl+p  补全
    ctrl+a           重复上次在Insert模式下的动作
    ctrl+y / ctrl+e  重复上一行/下一行光标处的字符
    ctrl+x ctrl+n    在文件中补全以前出现过的单词
    ctrl+x ctrl+p    在文件中补全以前出现过的单词
    ctrl+x ctrl+l    在文件中补全以前出现过的一行
    ctrl+x ctrl+f    补全文件名
    ctrl+x ctrl+k    单词补全
    ctrl+x ctrl+t    同义词补全



##12. vim plugins
###12.1 ctags usage
    <C-]>和<C-T> 

###12.2 TagList
######首先请先在你的~/.vimrc文件中添加下面两句:
    let Tlist_Show_One_File=1
    let Tlist_Exit_OnlyWindow=1

######此时用vim打开一个c源文件试试:
    $ vim ~/vim/src/main.c

######进入vim后用下面的命令打开taglist窗口, 如图5:
    :Tlist

左边的窗口就是前面介绍的TagList窗口, 其中列出了`main.c`文件中的tag, 并且按照`"typedef", "variable", "function"`等进行了分类. 将光标移到VimMain上, 如图中左边红色的方框, 按下回车后, 源程序会自动跳转到VimMain的定义处, 如图中右边的红色方框. 这就是TagList最基本也是最常用的操作. 再教你一个常用的操作, 你在浏览TagList窗口时, 如果还不想让源码跳转, 但是想看看tag在源码中完整的表达, 可以将光标移到你想要看的tag上, 如图中上边黄色的方框, 然后按下空格键, 在下面的命令栏中, 如图下边黄色的方框, 会显示该tag在源码中完整的写法, 而不会跳转到源码处.

###12.3 WinManager
######在该界面上你可以用下面的一些命令来进行常用的目录和文件操作:
    <F1>    显示帮助
    <cr>    如果光标下是目录, 则进入该目录; 如果光标下文件, 则打开该文件
    -       返回上级目录
    c       切换vim 当前工作目录正在浏览的目录
    d       创建目录
    D       删除目录或文件
    i       切换显示方式
    R       文件或目录重命名
    s       选择排序方式
    x       定制浏览方式, 使用你指定的程序打开该文件


